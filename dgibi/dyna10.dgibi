* fichier :  dyna10.dgibi
************************************************************************
* Section : Mecanique Dynamique
************************************************************************
*           Test Dyna10.dgibi: Jeux de données        *
*           ---------------------------------         *
*                                                     *

*******************************************************
*           Test dyna10.dgibi: jeux de données        *
*           ---------------------------------         *
*******************************************************

* SI GRAPH = N PAS DE GRAPHIQUE AFFICHE
* SINON SI GRAPH DIFFERENT DE N TOUS
* LES GRAPHIQUES SONT AFFICHES

GRAPH = 'N' ;

SAUT PAGE;
SI (NEG GRAPH 'N') ;
  OPTI ECHO 1   ;
  OPTI TRAC PSC ;
SINO ;
  OPTI ECHO 0   ;
FINSI ;

SAUT PAGE;
*******************************************************************
*                            DYNA10
*******************************************************************
*   MODES PROPES D'UNE PLAQUE CIRCULAIRE ,SYMETRIE CYCLIQUE

*  DESCRIPTION DU PROBLEME
*  ------------------------
*  IL S'AGIT DE CALCULER LES FREQUENCES NATURELLES  D'UNE PLAQUE
*  CIRCULAIRE LIBRE
*
*  REFERENCE :
*  ----------
* S. TIMOSHENKO,D. H. YOUNG AND WEAVER,JR.,VIBRATION PROBLEMES IN
* ENGINEERING ,4TH ED. (NEW YORK :WILEY & SONS,1974) P. 501
*
***********************************************************************
OPTI DIME 2 ELEM QUA4 ;
OPTI EPSI LINEAIRE;
*
*  MAILLAGE
P1 = 0.  0. ; P2 = 11.  0. ;
L1 = D 11  P1 P2 ;

SI (NEG GRAPH 'N');
  TRAC  'QUAL' L1 ;
FINSI;

OPTI MODE FOUR 0 ;
*
*  MODELE
 MOD1 = MODELE L1 MECANIQUE ELASTIQUE  COQ2 ;
*
*  PROPRIETES  DE MATERIAUX
 MAT1 = MATE MOD1 YOUN 1.E7 NU 0.3 RHO 0.0002588 ;
 CAR1 = CARA MOD1 EPAI 0.1  ;
*
*   MATRICE DE RIGIDITE
  RIG1 = RIGIDITE MOD1 (MAT1 ET CAR1)  ;
*
*  MATRICE DE MASSE
  MAS1 = MASSE MOD1 (MAT1 ET CAR1)  ;
*
*  CALCUL DES MODES
 TAB1 = VIBR 'INTERVALE' 1.  1000. (RIG1  )  MAS1 ;
*
*  COMPARAISON AVEC LES RESULTATS ANALYTIQUES
 TAB2 = TAB1.MODES ;
 OMEG1 = (((TAB2.1).FREQUENCE) * 2. ) * PI ;
 OMEG1TH = 446.18 ;ER01 =((OMEG1 - OMEG1TH) / (ABS OMEG1TH))*100.;
 OMEG2 = (((TAB2.2).FREQUENCE) * 2. ) * PI ;
 OMEG2TH = 1893.68 ;ER02 =((OMEG2 - OMEG2TH) / (ABS OMEG2TH))*100.;
  MESS '        PREMIER MODE        '  ;
 MESS 'THEORIQUE ' OMEG1TH 'CASTEM 'OMEG1 '%ERREUR ' ER01 ;
 MESS '        DEUXIEME MODE        '  ;
 MESS 'THEORIQUE ' OMEG2TH 'CASTEM 'OMEG2 '%ERREUR ' ER02 ;
*
*  DEFORMEES
 DEF1 = DEFORM (TAB2.1).DEFORMEE_MODALE L1 1.  ROUG ;
 DEF2 = DEFORM (TAB2.2).DEFORMEE_MODALE L1 1.  ROUG ;
 DEF0 = DEFORM (TAB2.1).DEFORMEE_MODALE L1 0.  VERT ;
SI (NEG GRAPH 'N');
 TRAC  (DEF0 ET DEF1) ;
 TRAC  (DEF0 ET DEF2) ;
FINSI;
*
*  CALCUL DES MODES (MODE FOURIER 1)
 OPTIO MODE FOUR 1 ;
 RIG1 = RIGIDITE MOD1 (MAT1 ET CAR1)  ;
 MAS1 = MASSE MOD1 (MAT1 ET CAR1)  ;
 TAB1 = VIBR 'INTERVALE' 1.  1000. (RIG1  )  MAS1 ;
*
*  COMPARAISON AVEC LES RESULTATS ANALYTIQUES
 TAB2 = TAB1.MODES ;
 OMEG1 = (((TAB2.1).FREQUENCE) * 2. ) * PI ;
 OMEG1TH = 1008.78 ;ER11 =((OMEG1 - OMEG1TH) / (ABS OMEG1TH))*100 ;
 OMEG2 = (((TAB2.2).FREQUENCE) * 2. ) * PI ;
 OMEG2TH = 2937.86 ;ER12 =((OMEG2 - OMEG2TH) / (ABS OMEG2TH))*100 ;
  MESS '        PREMIER MODE        '  ;
 MESS 'THEORIQUE ' OMEG1TH 'CASTEM 'OMEG1 '%ERREUR ' ER11 ;
 MESS '        DEUXIEME MODE        '  ;
 MESS 'THEORIQUE ' OMEG2TH 'CASTEM 'OMEG2 '%ERREUR ' ER12 ;
*
*  DEFORMEES
 DEF1 = DEFORM (TAB2.1).DEFORMEE_MODALE L1 1.  ROUG ;
 DEF2 = DEFORM (TAB2.2).DEFORMEE_MODALE L1 1.  ROUG ;
 DEF0 = DEFORM (TAB2.1).DEFORMEE_MODALE L1 0. VERT ;
SI (NEG GRAPH 'N');
 TRAC  (DEF0 ET DEF1) ;
 TRAC  (DEF0 ET DEF2) ;
FINSI;
*
*  CALCUL DES MODES (MODE FOURIER 2)
 OPTIO MODE FOUR 2 ;
 RIG1 = RIGIDITE MOD1 (MAT1 ET CAR1)  ;
 MAS1 = MASSE MOD1 (MAT1 ET CAR1)  ;
 TAB1 = VIBR 'INTERVALE' 1.  1000. (RIG1  )  MAS1 ;
*
*  COMPARAISON AVEC LES RESULTATS ANALYTIQUES
 TAB2 = TAB1.MODES ;
 OMEG1 = (((TAB2.1).FREQUENCE) * 2. ) * PI ;
 OMEG1TH = 258.14 ;ER21 =((OMEG1 - OMEG1TH) / (ABS OMEG1TH))*100 ;
 OMEG2 = (((TAB2.2).FREQUENCE) * 2. ) * PI ;
 OMEG2TH = 1732.43 ;ER22 =((OMEG2 - OMEG2TH) / (ABS OMEG2TH))*100 ;
  MESS '        PREMIER MODE        '  ;
 MESS 'THEORIQUE ' OMEG1TH 'CASTEM 'OMEG1 '%ERREUR ' ER21 ;
 MESS '        DEUXIEME MODE        '  ;
 MESS 'THEORIQUE ' OMEG2TH 'CASTEM 'OMEG2 '%ERREUR ' ER22 ;
*
*  DEFORMEES
 DEF1 = DEFORM (TAB2.1).DEFORMEE_MODALE L1 1.  ROUG ;
 DEF2 = DEFORM (TAB2.2).DEFORMEE_MODALE L1 1.  ROUG ;
 DEF0 = DEFORM (TAB2.1).DEFORMEE_MODALE L1 0. VERT ;
SI (NEG GRAPH 'N');
 TRAC  (DEF0 ET DEF1) ;
 TRAC  (DEF0 ET DEF2) ;
FINSI;
*
*  CALCUL DES MODES (MODE FOURIER 3)
 OPTIO MODE FOUR 3 ;
 RIG1 = RIGIDITE MOD1 (MAT1 ET CAR1)  ;
 MAS1 = MASSE MOD1 (MAT1 ET CAR1)  ;
 TAB1 = VIBR 'INTERVALE' 1.  1000.    (RIG1  )  MAS1 ;
*
*  COMPARAISON AVEC LES RESULTATS ANALYTIQUES
 TAB2 = TAB1.MODES ;
 OMEG1 = (((TAB2.1).FREQUENCE) * 2. ) * PI ;
 OMEG1TH = 601.23 ;ER31 =((OMEG1 - OMEG1TH) / (ABS OMEG1TH))*100 ;
 OMEG2 = (((TAB2.2).FREQUENCE) * 2. ) * PI ;
 OMEG2TH = 2601.11 ;ER32 =((OMEG2 - OMEG2TH) / (ABS OMEG2TH))*100;
  MESS '        PREMIER MODE        '  ;
 MESS 'THEORIQUE ' OMEG1TH 'CASTEM 'OMEG1 '%ERREUR ' ER31 ;
 MESS '        DEUXIEME MODE        '  ;
 MESS 'THEORIQUE ' OMEG2TH 'CASTEM 'OMEG2 '%ERREUR ' ER32 ;
*
*  DEFORMEES
 DEF1 = DEFORM (TAB2.1).DEFORMEE_MODALE L1 1.  ROUG ;
 DEF2 = DEFORM (TAB2.2).DEFORMEE_MODALE L1 1.  ROUG ;
 DEF0 = DEFORM (TAB2.1).DEFORMEE_MODALE L1 0. VERT ;
SI (NEG GRAPH 'N');
 TRAC  (DEF0 ET DEF1) ;
 TRAC  (DEF0 ET DEF2) ;
FINSI;


SI ((MAXI ABS (PROG ER01 ER02 ER11 ER12 ER21 ER22 ER31 ER32)) < 2.5);
  ERRE 0;
SINON;
  ERRE 5;
FINSI;

FIN ;






